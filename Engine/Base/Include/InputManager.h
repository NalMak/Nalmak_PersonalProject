#pragma once
#ifndef  __INPUTMANAGER_H__
#define __INPUTMANAGER_H__

#include "Nalmak_Include.h"

typedef unsigned long long KEY_STATE;

class NALMAK_DLL InputManager
{
	DECLARE_SINGLETON(InputManager)
public:
	InputManager();
	~InputManager();
public:
	void Initialize(HINSTANCE _hinstance, HWND _hwnd);
	void Update();
	void Release();
public:
	LONG GetMouseDT(MOUSE_MOVE_STATE _ms);
	bool GetKeyDown(KEY_STATE _ks);
	bool GetKeyPress(KEY_STATE _ks);
	bool GetKeyUp(KEY_STATE _ks);

	Vector2 GetMouseMoveDir();
	Vector2 GetMousePosition();
private:
	void ProcessKeyState();
private:
	LPDIRECTINPUT8 m_inputSDK;
	LPDIRECTINPUTDEVICE8	m_keyBoard = nullptr;
	LPDIRECTINPUTDEVICE8	m_mouse = nullptr;

	signed char				m_keyState[256];
	DIMOUSESTATE			m_mouseState;

private:
	unsigned long long m_changed = 0;
	unsigned long long m_press = 0;
	unsigned long long m_pressed = 0;
	unsigned long long m_up = 0;
	unsigned long long m_down = 0;
};



#define KEY_STATE_DEFAULT	0x0000000000000000

#define KEY_STATE_LEFT_ARROW		0x0000000000000001
#define KEY_STATE_RIGHT_ARROW		0x0000000000000002
#define KEY_STATE_DOWN_ARROW		0x0000000000000004
#define KEY_STATE_UP_ARROW		0x0000000000000008

#define KEY_STATE_LEFT_MOUSE	0x0000000000000010
#define KEY_STATE_RIGHT_MOUSE	0x0000000000000020
#define KEY_STATE_SPACE		0x0000000000000040
#define KEY_STATE_ENTER		0x0000000000000080

#define KEY_STATE_TAB		0x0000000000000100
#define KEY_STATE_SHIFT		0x0000000000000200
#define KEY_STATE_CONTROL	0x0000000000000400
#define KEY_STATE_BACKSPACE	0x0000000000000800

#define KEY_STATE_ESCAPE	0x0000000000001000
#define KEY_STATE_ALT		0x0000000000002000
#define KEY_STATE_WHEEL_MOUSE 0x0000000000004000
//#define KEY_STATE_0		0x0000000000008000

#define KEY_STATE_A			0x0000000000010000
#define KEY_STATE_B			0x0000000000020000
#define KEY_STATE_C			0x0000000000040000
#define KEY_STATE_D			0x0000000000080000

#define KEY_STATE_E			0x0000000000100000
#define KEY_STATE_F			0x0000000000200000
#define KEY_STATE_G			0x0000000000400000
#define KEY_STATE_H			0x0000000000800000

#define KEY_STATE_I			0x0000000001000000
#define KEY_STATE_J			0x0000000002000000
#define KEY_STATE_K			0x0000000004000000
#define KEY_STATE_L			0x0000000008000000

#define KEY_STATE_M			0x0000000010000000
#define KEY_STATE_N			0x0000000020000000
#define KEY_STATE_O			0x0000000040000000
#define KEY_STATE_P			0x0000000080000000

#define KEY_STATE_Q			0x0000000100000000
#define KEY_STATE_R			0x0000000200000000
#define KEY_STATE_S			0x0000000400000000
#define KEY_STATE_T			0x0000000800000000

#define KEY_STATE_U			0x0000001000000000
#define KEY_STATE_V			0x0000002000000000
#define KEY_STATE_W			0x0000004000000000
#define KEY_STATE_X			0x0000008000000000

#define KEY_STATE_Y			0x0000010000000000
#define KEY_STATE_Z			0x0000020000000000
#define KEY_STATE_1			0x0000040000000000
#define KEY_STATE_2			0x0000080000000000

#define KEY_STATE_3			0x0000100000000000
#define KEY_STATE_4			0x0000200000000000
#define KEY_STATE_5			0x0000400000000000
#define KEY_STATE_6			0x0000800000000000

#define KEY_STATE_7			0x0001000000000000
#define KEY_STATE_8			0x0002000000000000
#define KEY_STATE_9			0x0004000000000000
#define KEY_STATE_0			0x0008000000000000

#define KEY_STATE_F1		0x0010000000000000
#define KEY_STATE_F2		0x0020000000000000
#define KEY_STATE_F3		0x0040000000000000
#define KEY_STATE_F4		0x0080000000000000

#define KEY_STATE_F5		0x0100000000000000
#define KEY_STATE_F6		0x0200000000000000
#define KEY_STATE_F7		0x0400000000000000
#define KEY_STATE_F8		0x0800000000000000

#define KEY_STATE_F9		0x1000000000000000
#define KEY_STATE_F10		0x2000000000000000
#define KEY_STATE_F11		0x4000000000000000
#define KEY_STATE_F12		0x8000000000000000

#define KEY_STATE_ALLKEY	0xffffffffffffffff


#endif // ! __INPUTMANAGER_H__
